#{extends 'main.html'/}
#{set title:post.title/}

<ul class="pagenation">
  #{if post.previous()}
    <li id="previous">
      <a href="@{Application.show(post.previous().id)}">${post.previous().title}</a>
    </li>
  #{/if}
  #{if post.next()}
    <li id="next">
      <a href="@{Application.show(post.next().id)}">${post.next().title}</a>
    </li>
  #{/if}
</ul>
#{display post:post, as:'full'/}

<h3>Post a comment</h3>

#{form @Application.postComment(post.id)}
  #{ifErrors}
    <p class="error">all fields required!</p>
  #{/ifErrors}
  <p>
    <label for="author">Your name: </label>
    <input id="author" name="author" type="text" />
  </p>
  <p>
    <label for="content">Your message: </label>
    <textarea id="content" name="content"></textarea>
  </p>
  <p><input comment="" your="" type="submit" value="Submit your comment" /></p>
#{/form}

<script type="text/javascript" charset="utf-8">
  $(function() {
    // Expose the form
    $('form').click(function() {
      $('form').expose({api: true}).load();
    });

    // If there is an error, focus to form
    if ($('form .error').size()) {
      $('form').expose({api: true, loadSpeed: 0}).load();
      $('form input[type=text]').get(0).focus();
    };
  });
</script>

